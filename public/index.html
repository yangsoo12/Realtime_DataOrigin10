<html>

<head>
    <title>Temperature &amp; Humidity live data</title>
    <meta charset="utf-8"/>
    <script src="javascripts/jquery-2.1.4.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="javascripts/Chart.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="javascripts/index.js" type="text/javascript" charset="utf-8"></script>
    <link href="stylesheets/style.css" rel="stylesheet" />
    <script src="https://www.gstatic.com/firebasejs/4.1.1/firebase-app.js"></script>
 <script src="https://www.gstatic.com/firebasejs/4.1.1/firebase-auth.js"></script>
 <script src="https://www.gstatic.com/firebasejs/4.1.1/firebase-database.js"></script>
 <script src="https://www.gstatic.com/firebasejs/4.1.1/firebase-messaging.js"></script>
<style type="text/css">
   .centertable {
        margin: 0px auto;
    }
    .centertable div{
        margin-top: -20px;
    }
    .centertable p{
        text-align: center;
        margin-top: -15px;
    }
    .ttitle {
        text-align: center;
    }
    #g5, #g6, #g7 {
        margin-top: -10px;
    }

</style>
    
</head>

<body>

    <script type="text/javascript">
        //-------------------- messaging ----------------------
var config = {
  apiKey: "AAAAo-ULW8U:APA91bFxJSCqUJRvASWcpBF-7Q2yZApk3KWF0fmC21bJi4Ou9CnTz1fDjXFXHAcBwZc6Iq5JZwyHqFagCWAKybwMYL6Tnyhga_b-LtM2JO_qNcS893Sxv7Jwi55SOhpHz_I_enr4s42Y",

};

firebase.initializeApp(config);


    var token2 = "eAZBppd6B1Q:APA91bGp7aML_AY7oRkMdBk0p4RKe9nsweEvYbgYU_5DoL13YX2pajkB92zxAtHvZN42aZi572aawslJxF7r43Flb2tCiFGQBj19qAOn3CtmnWij_mfQk5jpKi7B4YuNF-xdS2wgT7EO";
    var myMessage;  
    var test = 81;

function send_notification(tokens, message)
    {
        
        
        $.ajax({
            url:"https://fcm.googleapis.com/fcm/send",
            type:"POST",
            headers: {"Authorization":"key=AAAAo-ULW8U:APA91bFxJSCqUJRvASWcpBF-7Q2yZApk3KWF0fmC21bJi4Ou9CnTz1fDjXFXHAcBwZc6Iq5JZwyHqFagCWAKybwMYL6Tnyhga_b-LtM2JO_qNcS893Sxv7Jwi55SOhpHz_I_enr4s42Y" ,"Content-Type":" application/x-www-form-urlencoded; charset=UTF-8"},
            body: {"registration_ids":tokens, "data":JSON.stringify(message)}

            })
    }
 

    
    //if(obj.params.pm2>50){
    if(test>50){
        myMessage = "실내 미세먼지 : 매우나쁨";
    }
    send_notification(token2, myMessage);

//------------------------------------------------------
    </script>
    <canvas id="myChart" width="400" height="150"></canvas>
	
<!------------------------------------------------------------------------>

<table class ="centertable" >
    <tr>
        <td> 
            <div class="ttitle">PM2.5(㎍/㎥)</div>
            <div id="g5"></div>
            <p id="p2g5">--</p>
        </td>

        <td> 
            <div class="ttitle">PM10(㎍/㎥)</div>
            <div id="g6"></div>
            <p id="p10g6">--</p>
        </td>

        <td> 
            <div class="ttitle">온도(C)</div>
            <div id="g7"></div> 
            <p id="tempg7">--</p>
        </td>
    </tr>
</table>
  <!--  <div id="g5"></div>
	<p id="p2g5">test</p>
	-->
    <script src="raphael-2.1.4.min.js"></script>
    <!--<script src="../justgage-1.0.1.js"></script>-->
    <script src="justgage.js"></script>
    <script>
    var g5;
    document.addEventListener("DOMContentLoaded", function(event) {
        g5 = new JustGage({
            id: "g5",
            value: 72,
            min: 0,
            max: 100,
            donut: true,
            gaugeWidthScale: 0.3,
            counter: true,
            hideInnerShadow: true
        });

   //     document.getElementById('g1_refresh').addEventListener('click', function() {
   //         g1.refresh(getRandomInt(0, 100));
   //     });
   setInterval(myMethod, 1000);
   function myMethod()
	{
		var aa = document.getElementById("pm2").innerHTML;
		g5.refresh(parseInt(aa));
	}
    });
    </script>
	
<!------------------------------------------------------------------------>


<!------------------------------------------------------------------------>
	<!--
    <div id="g6"></div>
	<p id="p10g6"></p>
-->
    <script src="raphael-2.1.4.min.js"></script>
    <!--<script src="../justgage-1.0.1.js"></script>-->
    <script src="justgage.js"></script>
    <script>

	var g6;
    document.addEventListener("DOMContentLoaded", function(event) {
        g6 = new JustGage({
            id: "g6",
            value: 72,
            min: 0,
            max: 100,
            donut: true,
            gaugeWidthScale: 0.3,
            counter: true,
            hideInnerShadow: true
        });

   //     document.getElementById('g1_refresh').addEventListener('click', function() {
   //         g1.refresh(getRandomInt(0, 100));
   //     });
   setInterval(myMethod, 1000);
   function myMethod()
	{
		var aa = document.getElementById("pm10").innerHTML;
		g6.refresh(parseInt(aa));
	}
    });
    </script>
    </script>
<!------------------------------------------------------------------------>

<!------------------------------------------------------------------------>
	<!--
    <div id="g7"></div>	
	<p id="tempg7"></p>
-->
    <script src="raphael-2.1.4.min.js"></script>
    <!--<script src="../justgage-1.0.1.js"></script>-->
    <script src="justgage.js"></script>
    <script>

	var g7;
    document.addEventListener("DOMContentLoaded", function(event) {
        g7 = new JustGage({
            id: "g7",
            value: 72,
            min: 0,
            max: 100,
            donut: true,
            gaugeWidthScale: 0.3,
            counter: true,
            hideInnerShadow: true
        });

   //     document.getElementById('g1_refresh').addEventListener('click', function() {
   //         g1.refresh(getRandomInt(0, 100));
   //     });
   setInterval(myMethod, 1000);
   function myMethod()
	{
		var aa = document.getElementById("temp").innerHTML;
		g7.refresh(parseInt(aa));
	}
    });
    </script>
    </script>
<!------------------------------------------------------------------------>
    <br><br><br>
    <p id="pm2"></p>
    <p id="pm10"></p>
	<p id="temp"></p>
</body>

</html>
